@inherits Umbraco.Web.Mvc.UmbracoViewPage
@using HHCoApps.CMSWeb.Caching
@using HHCoApps.CMSWeb.Helpers
@using HHCoApps.CMSWeb.Helpers.Enum
@using HHCoApps.CMSWeb.Models.Enums;
@using Umbraco.Web.Composing
@{
    var umbracoHelper = Current.Factory.GetInstance<UmbracoHelper>();
    var navigationManagement = (NavigationManagement)umbracoHelper.ContentQuery.ContentSingleFromCache(CachedContent.NavigationManagementContent);
    var socialNetworks = navigationManagement?.SocialNetworks ?? Enumerable.Empty<IconLink>();
    var rightFooterMenu = navigationManagement?.RightFooter ?? Enumerable.Empty<LinkItem>();
}

<footer id="footer" class="container-fluid">
    <div class="footer-social">
        <div class="footer-social__following">
            @if (socialNetworks.Any())
            {
                <p>FOLLOW US</p>
                <ul>
                    @foreach (var socialNetwork in socialNetworks)
                    {
                        var iconClassName = !string.IsNullOrEmpty(socialNetwork?.Icon) ? $"icon-{ Icon.FromDisplayName(socialNetwork.Icon).Value}" : string.Empty;
                        var iconAlt = !string.IsNullOrEmpty(socialNetwork?.Icon) ? $"icon-{ Icon.FromDisplayName(socialNetwork.Icon).Value}" : string.Empty;
                        var linkUrl = socialNetwork?.Link?.Url ?? string.Empty;

                        <li><a target="@(socialNetwork?.Link?.Target)" href="@linkUrl"><i class="@iconClassName" alt="@iconAlt"></i></a></li>
                    }
                </ul>
            }
        </div>
        <div class="footer-social__updating">
            @if (navigationManagement.EnabledSubscription && navigationManagement.FollowUsForm != null)
            {
                <p>@navigationManagement.SubscribeLabel</p>
                @Umbraco.RenderMacro("followUs", new { FormGuid = navigationManagement.FollowUsForm })
                <input type="hidden" id="idSubscribeSuccessfulMessage" value="@navigationManagement.SubscribeSuccessfulMessage" />
                <input type="hidden" id="idAlreadySubscribeMessage" value="@navigationManagement.AlreadySubscribeMessage" />
            }
        </div>
    </div>
    <div class="border-footer"></div>
    @Html.Partial("Navigation/FooterNavigation", navigationManagement)
    <div class="footer-bottom">

        @if (navigationManagement.FooterLogo != null)
        {
            <div class="footer-logo">
                <a href="/"><img class="lozad" data-src="@navigationManagement.FooterLogo.GetCropImageUrl(ImageCropProfile.FooterLogo)" alt="footerLogo" /></a>
            </div>
        }

        @if (rightFooterMenu.Any())
        {
            <div class="footer-copyright">
                @foreach (var childItem in rightFooterMenu)
                {
                    <a href="@(childItem.Link?.Url ?? string.Empty)">
                        <p>@childItem.Title</p>
                    </a>
                }
            </div>
        }
    </div>
</footer>